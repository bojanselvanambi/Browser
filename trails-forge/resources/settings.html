<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #121212;
            color: #E0E0E0;
            padding: 40px;
            min-height: 100vh;
        }

        h1 {
            font-size: 28px;
            font-weight: 500;
            margin-bottom: 32px;
            color: #FC93AD;
        }

        .section {
            margin-bottom: 32px;
        }

        .section-title {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #B0B0B0;
            margin-bottom: 16px;
        }

        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: #1E1E1E;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .setting-label {
            font-size: 15px;
        }

        .setting-description {
            font-size: 13px;
            color: #B0B0B0;
            margin-top: 4px;
        }

        select {
            background: #2a2a2a;
            color: #E0E0E0;
            border: 1px solid #444444;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            min-width: 150px;
        }

        select:focus {
            outline: none;
            border-color: #FC93AD;
        }

        .toggle {
            width: 44px;
            height: 24px;
            background: #444444;
            border-radius: 12px;
            position: relative;
            cursor: pointer;
            transition: background 0.2s;
        }

        .toggle.active {
            background: #FC93AD;
        }

        .toggle-knob {
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: left 0.2s;
        }

        .toggle.active .toggle-knob {
            left: 22px;
        }

        .status {
            margin-top: 24px;
            padding: 12px;
            background: #1E1E1E;
            border-radius: 8px;
            font-size: 13px;
            color: #FC93AD;
            display: none;
        }

        .status.show {
            display: block;
        }

        .version {
            margin-top: 48px;
            text-align: center;
            color: #B0B0B0;
            font-size: 13px;
        }
    </style>
</head>

<body>
    <h1 style="display: flex; align-items: center; gap: 12px;">
        <!-- Gear/settings scribble illustration -->
        <svg width="28" height="28" viewBox="0 0 28 28" fill="none">
            <circle cx="14" cy="14" r="5" stroke="#FC93AD" stroke-width="2.5" fill="none" />
            <path d="M14 3 L14 7" stroke="#FC93AD" stroke-width="2.5" stroke-linecap="round" />
            <path d="M14 21 L14 25" stroke="#FC93AD" stroke-width="2.5" stroke-linecap="round" />
            <path d="M3 14 L7 14" stroke="#FC93AD" stroke-width="2.5" stroke-linecap="round" />
            <path d="M21 14 L25 14" stroke="#FC93AD" stroke-width="2.5" stroke-linecap="round" />
            <path d="M6 6 L9 9" stroke="#FC93AD" stroke-width="2" stroke-linecap="round" opacity="0.6" />
            <path d="M19 19 L22 22" stroke="#FC93AD" stroke-width="2" stroke-linecap="round" opacity="0.6" />
            <path d="M6 22 L9 19" stroke="#FC93AD" stroke-width="2" stroke-linecap="round" opacity="0.6" />
            <path d="M19 9 L22 6" stroke="#FC93AD" stroke-width="2" stroke-linecap="round" opacity="0.6" />
        </svg>
        Settings
    </h1>

    <div class="section">
        <div class="section-title">Search</div>
        <div class="setting-row">
            <div>
                <div class="setting-label">Default Search Engine</div>
                <div class="setting-description">Choose your preferred search engine for new trails</div>
            </div>
            <select id="searchEngine">
                <option value="grok">Grok</option>
                <option value="google">Google</option>
                <option value="duckduckgo">DuckDuckGo</option>
                <option value="bing">Bing</option>
                <option value="ecosia">Ecosia</option>
            </select>
        </div>
    </div>

    <div class="section">
        <div class="section-title">Privacy</div>
        <div class="setting-row">
            <div>
                <div class="setting-label">Content Blocking (uBlock Origin)</div>
                <div class="setting-description">Block ads and trackers for a faster browsing experience</div>
            </div>
            <div id="adblockToggle" class="toggle active" onclick="toggleAdblock()">
                <div class="toggle-knob"></div>
            </div>
        </div>
    </div>

    <div id="status" class="status">Settings saved!</div>

    <div class="version">
        Trails Browser v1.0.0
    </div>

    <script>
        const searchEngineSelect = document.getElementById('searchEngine');
        const adblockToggle = document.getElementById('adblockToggle');
        const status = document.getElementById('status');

        // Show status message
        function showStatus(message) {
            status.textContent = message;
            status.classList.add('show');
            setTimeout(() => status.classList.remove('show'), 2000);
        }

        // Search engine change
        searchEngineSelect.addEventListener('change', function () {
            if (window.settingsAPI) {
                window.settingsAPI.setSearchEngine(this.value);
                showStatus('Search engine changed to ' + this.value);
            }
        });

        // Adblock toggle
        function toggleAdblock() {
            const isActive = adblockToggle.classList.toggle('active');
            if (window.settingsAPI) {
                window.settingsAPI.setAdblock(isActive);
                showStatus('Content blocking ' + (isActive ? 'enabled' : 'disabled'));
            }
        }

        // Load current settings on page open
        if (window.settingsAPI && window.settingsAPI.getSettings) {
            window.settingsAPI.getSettings().then(settings => {
                if (settings) {
                    // Set search engine dropdown
                    if (settings.searchEngine) {
                        searchEngineSelect.value = settings.searchEngine;
                    }
                    // Set adblock toggle
                    if (settings.adblockEnabled !== undefined) {
                        if (settings.adblockEnabled) {
                            adblockToggle.classList.add('active');
                        } else {
                            adblockToggle.classList.remove('active');
                        }
                    }
                }
            });
        }
    </script>
</body>

</html>